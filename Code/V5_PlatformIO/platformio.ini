; PlatformIO Project Configuration File for Ash-Nazg Melty Brain Robot
; Board: ESP32-S2 Mini (Lolin S2 Mini compatible)
; 
; ============ UPLOAD INSTRUCTIONS ============
; 1. Put the board in boot mode manually:
;    - Hold BOOT button (GPIO 0)
;    - Press and release RESET button
;    - Release BOOT button
; 2. Run: pio run -t upload
; 3. After successful upload, press RESET
;
; ============ USEFUL COMMANDS ============
; Build only:           pio run
; Upload:               pio run -t upload
; Serial Monitor:       pio device monitor
; Clean:                pio run -t clean
; ==========================================

[env:esp32s2_mini]
platform = espressif32
board = lolin_s2_mini
framework = arduino

; Upload settings - COM6 is used when board is in boot mode
upload_port = COM6
upload_speed = 921600

; Monitor settings - COM7 after reset
monitor_port = COM7
monitor_speed = 115200

; Use the local libraries from the project's Libraries folder
lib_extra_dirs = 
    ../Libraries

; Library dependencies
lib_deps = 
    https://github.com/ZZ-Cat/CRSFforArduino.git
    https://github.com/adafruit/Adafruit_DotStar.git

; Build flags for ESP32-S2 with PSRAM
build_flags = 
    -DBOARD_HAS_PSRAM
    -DCORE_DEBUG_LEVEL=0
    -DARDUINO_USB_CDC_ON_BOOT=1

; Partition scheme with OTA support
board_build.partitions = min_spiffs.csv
